(()=>{"use strict";const e=e=>{window.elementorCommon?.notifications?.showToast?window.elementorCommon.notifications.showToast({message:e.message}):e.alertFallback&&window.alert(e.message)};new class{constructor(){window.elementorCommon&&(this.getPostTypes(),this.addButtonListeners())}getPostTypes(){if(!window.elementorNewPostDialogConfig)return;const{types:e,...t}=window.elementorNewPostDialogConfig;this.config=t,this.postTypes=e}addButtonListeners(){Object.keys(this.postTypes).forEach((e=>{const t=`a[href*="edit.php?action=elementor_new_post&post_type=${e}"]`,o=`a[href$="post-new.php?post_type=${this.addLinkSuffix(e)}"]`,s=document.querySelectorAll(`${o}, ${t}`);s.length&&s.forEach((t=>{t.addEventListener("click",(t=>{t.preventDefault(),this.getDialog(e).show()}))}))}))}addLinkSuffix(e){return this.postTypes[e].triggerAllLinks||(e+=this.config.linkSuffix),e}getDialog=e=>{if(this.postTypes[e].dialog)return this.postTypes[e].dialog;const t=document.getElementById(`${this.config.formSelector}${e}`),o=window.elementorCommon.dialogsManager.createWidget("confirm",{className:"e-new-post-dialog",headerMessage:t.querySelector(".e-new-post-dialog__title"),message:t,strings:{confirm:this.config.dialogButtons.confirm,cancel:this.config.dialogButtons.cancel},onConfirm:()=>{this.createPost(t,e)}});return this.postTypes[e].dialog=o,o};createPost(t,o){const s=new FormData(t);window.elementorCommon.ajax.addRequest(this.config.ajaxAction,{data:{post_type:o,post_title:s.get("post_title")},error:t=>{t=JSON.parse(t);let s=this.postTypes[o].messages.error;e({message:s}),s=s.replace(/\.$/,""),console.error(`${s}: ${t.data}`)},success:t=>{t=JSON.parse(t),e({message:this.postTypes[o].messages.success,alertFallback:!1}),setTimeout((()=>{window.top.location=t.edit_url}),1500)}})}}})();